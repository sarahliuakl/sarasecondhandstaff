<!DOCTYPE html>
<html lang="{{ current_lang() }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}{{ _('Sarah\'s Garage Sale') }}{% endblock %}</title>
  
  <!-- SEO Meta标签 -->
  <meta name="description" content="{% block description %}{{ _('Sarah\'s Garage Sale - Personal garage sale in Auckland, New Zealand. Electronics, clothing, books and more. Student-friendly prices, honest descriptions') }}{% endblock %}" />
  <meta name="keywords" content="{% block keywords %}second-hand goods,New Zealand,Auckland,electronics,clothing,anime merchandise,second-hand trading,Sara{% endblock %}" />
  <meta name="author" content="Sara" />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="{{ current_lang() }}-{{ get_locale().territory if get_locale() and get_locale().territory else 'CN' }}" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="{% block og_url %}{{ request.url }}{% endblock %}" />
  <meta property="og:title" content="{% block og_title %}{{ _('Sarah\'s Garage Sale') }}{% endblock %}" />
  <meta property="og:description" content="{% block og_description %}{{ _('Sarah\'s Garage Sale - Personal garage sale in Auckland, New Zealand. Electronics, clothing, books and more. Student-friendly prices, honest descriptions') }}{% endblock %}" />
  <meta property="og:image" content="{% block og_image %}{{ url_for('static', filename='images/logo.png', _external=True) if url_for else '/static/images/logo.png' }}{% endblock %}" />
  <meta property="og:locale" content="{{ (get_locale().language + '_' + get_locale().territory) if get_locale() and get_locale().territory else (get_locale().language + '_CN') if get_locale() else 'zh_CN' }}" />
  <meta property="og:site_name" content="{{ _('Sarah\'s Garage Sale') }}" />
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:url" content="{% block twitter_url %}{{ request.url }}{% endblock %}" />
  <meta name="twitter:title" content="{% block twitter_title %}{{ _('Sarah\'s Garage Sale') }}{% endblock %}" />
  <meta name="twitter:description" content="{% block twitter_description %}{{ _('Sarah\'s Garage Sale - Personal garage sale in Auckland, New Zealand. Electronics, clothing, books and more. Student-friendly prices, honest descriptions') }}{% endblock %}" />
  <meta name="twitter:image" content="{% block twitter_image %}{{ url_for('static', filename='images/logo.png', _external=True) if url_for else '/static/images/logo.png' }}{% endblock %}" />
  
  <!-- 额外的SEO标签 -->
  <meta name="geo.region" content="NZ-AUK" />
  <meta name="geo.placename" content="Auckland" />
  <meta name="geo.position" content="-36.8485;174.7633" />
  <meta name="ICBM" content="-36.8485, 174.7633" />
  
  <!-- 页面特定的额外meta标签 -->
  {% block extra_meta %}{% endblock %}
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{% block canonical %}{{ request.url }}{% endblock %}" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') if url_for else '/static/favicon.ico' }}" />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Custom CSS -->
  <style>
    :root {
      --pastel-pink: #FFE4E1;
      --pastel-purple: #E6E6FA;
      --pastel-blue: #E0F6FF;
      --pastel-green: #F0FFF0;
      --pastel-yellow: #FFFACD;
      --soft-gray: #F8F9FA;
      --text-primary: #2C3E50;
      --text-secondary: #5D6D7E;
      --accent-primary: #FF6B6B;
      --accent-secondary: #4ECDC4;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, var(--pastel-pink) 0%, var(--pastel-purple) 50%, var(--pastel-blue) 100%);
      min-height: 100vh;
    }
    
    .hero-title {
      font-family: 'Playfair Display', serif;
    }
    
    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      border-radius: 16px;
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--accent-primary) 0%, #FF8E8E 100%);
      border: none;
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 500;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }
    
    .btn-primary:hover {
      background: linear-gradient(135deg, #FF5252 0%, var(--accent-primary) 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(255, 107, 107, 0.3);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, var(--accent-secondary) 0%, #7BDDD7 100%);
      border: none;
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 500;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }
    
    .btn-secondary:hover {
      background: linear-gradient(135deg, #45B7B8 0%, var(--accent-secondary) 100%);
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(78, 205, 196, 0.3);
    }
    
    .nav-link {
      color: var(--text-primary);
      font-weight: 500;
      transition: all 0.3s ease;
      text-decoration: none;
      position: relative;
      padding: 8px 16px;
      border-radius: 8px;
    }
    
    .nav-link:hover {
      background: rgba(255, 255, 255, 0.2);
      color: var(--accent-primary);
    }
    
    .product-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
      border-radius: 20px;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 16px 48px rgba(0, 0, 0, 0.12);
    }
    
    .product-image {
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .product-image:hover {
      transform: scale(1.05);
    }
    
    .footer-gradient {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .hero-section {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 24px;
      padding: 3rem;
      margin-bottom: 4rem;
    }
    
    .section-title {
      font-family: 'Playfair Display', serif;
      color: var(--text-primary);
      font-size: 2.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    
    .section-subtitle {
      color: var(--text-secondary);
      font-size: 1.125rem;
      line-height: 1.6;
      margin-bottom: 2rem;
    }
  </style>
  
  <!-- 结构化数据 -->
  {% block structured_data %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ _('Sarah\'s Garage Sale') }}",
    "url": "{{ request.url_root if request else 'https://example.com' }}",
    "description": "{{ _('Sarah\'s Garage Sale - Personal garage sale in Auckland, New Zealand. Electronics, clothing, books and more. Student-friendly prices, honest descriptions') }}",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "{{ (request.url_root + 'products?search={search_term_string}') if request else 'https://example.com/products?search={search_term_string}' }}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  {% endblock %}
</head>
<body class="text-gray-800">
  <!-- Header -->
  <header class="bg-white/20 backdrop-blur-md border-b border-white/20 sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center py-6 px-8">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center">
          <span class="text-white font-bold text-lg">S</span>
        </div>
        <h1 class="hero-title text-3xl font-bold text-gray-800">{{ _('Sarah\'s Garage Sale') }}</h1>
      </div>
      <nav class="flex items-center space-x-2">
        <a href="{{ url_for('main.index', lang=current_lang()) }}" class="nav-link">{{ _('Home') }}</a>
        <a href="{{ url_for('main.products', lang=current_lang()) }}" class="nav-link">{{ _('Products') }}</a>
        <a href="{{ url_for('main.info', lang=current_lang()) }}" class="nav-link">{{ _('Sale Info') }}</a>
        
        <!-- 购物车 -->
        <a href="{{ url_for('main.cart', lang=current_lang()) }}" class="nav-link relative">
          {{ _('Cart') }}
          <span class="cart-count absolute -top-1 -right-1 bg-gradient-to-r from-pink-500 to-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center" style="display: none;">0</span>
        </a>
        
        <!-- 订单查询 -->
        <a href="{{ url_for('main.order_query', lang=current_lang()) }}" class="nav-link">{{ _('Order Query') }}</a>
        
        <!-- 语言切换器 -->
        <div class="language-switcher flex items-center space-x-2 ml-4 border-l border-white/20 pl-4">
          <a href="{{ url_for('main.set_language_route', language='zh') }}" 
             class="nav-link text-sm {{ 'font-bold text-pink-600' if get_locale().language == 'zh' else '' }}">中文</a>
          <span class="text-gray-400">|</span>
          <a href="{{ url_for('main.set_language_route', language='en') }}" 
             class="nav-link text-sm {{ 'font-bold text-pink-600' if get_locale().language == 'en' else '' }}">EN</a>
        </div>
      </nav>
    </div>
  </header>
  <!-- Main -->
  <main class="container mx-auto px-8 py-12">
    {% block content %}{% endblock %}
  </main>
  
  <!-- Footer -->
  <footer class="footer-gradient mt-16 py-12">
    <div class="container mx-auto px-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
        <div class="text-center md:text-left">
          <div class="flex items-center justify-center md:justify-start space-x-3 mb-4">
            <div class="w-8 h-8 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center">
              <span class="text-white font-bold">S</span>
            </div>
            <h3 class="hero-title text-xl font-semibold text-gray-800">{{ _('Sarah\'s Garage Sale') }}</h3>
          </div>
          <p class="text-gray-600 text-sm leading-relaxed">
            {{ _('Personal garage sale in Auckland, New Zealand') }}<br>
            {{ _('Student decluttering - honest descriptions, fair prices') }}
          </p>
        </div>
        
        <div class="text-center">
          <h4 class="font-semibold text-gray-800 mb-4">{{ _('Contact') }}</h4>
          <div class="space-y-2 text-sm text-gray-600">
            <p class="flex items-center justify-center space-x-2">
              <span>📞</span>
              <span>0225255862</span>
            </p>
            <p class="flex items-center justify-center space-x-2">
              <span>✉️</span>
              <span>sarahliu.akl@gmail.com</span>
            </p>
            <p class="flex items-center justify-center space-x-2">
              <span>📍</span>
              <span>{{ _('North Shore, Auckland') }}</span>
            </p>
          </div>
        </div>
        
        <div class="text-center md:text-right">
          <h4 class="font-semibold text-gray-800 mb-4">{{ _('Live Info') }}</h4>
          <div class="space-y-2 text-sm text-gray-600">
            <div class="flex items-center justify-center md:justify-end space-x-2">
              <span>🌤️</span>
              <span id="weather">{{ _('Loading weather...') }}</span>
            </div>
            <div class="flex items-center justify-center md:justify-end space-x-2">
              <span>⏰</span>
              <span id="localtime"></span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="border-t border-white/20 pt-6 text-center text-sm text-gray-500">
        © 2025 {{ _('Sarah\'s Garage Sale') }} - {{ _('All rights reserved') }}
      </div>
    </div>
  </footer>
<script>
function updateTime() {
  // Auckland, New Zealand timezone is UTC+12
  let now = new Date();
  let utc = now.getTime() + (now.getTimezoneOffset() * 60000);
  let auckland = new Date(utc + (12 * 3600000));
  let y = auckland.getFullYear();
  let m = String(auckland.getMonth()+1).padStart(2,'0');
  let d = String(auckland.getDate()).padStart(2,'0');
  let h = String(auckland.getHours()).padStart(2,'0');
  let min = String(auckland.getMinutes()).padStart(2,'0');
  let s = String(auckland.getSeconds()).padStart(2,'0');
  document.getElementById('localtime').textContent = `{{ _('Auckland Time') }}: ${y}-${m}-${d} ${h}:${min}:${s}`;
}
setInterval(updateTime, 1000);
updateTime();
</script>
   <script>
  fetch("https://api.open-meteo.com/v1/forecast?latitude=-36.8485&longitude=174.7633&current_weather=true")
    .then(response => response.json())
    .then(data => {
      const temp = data.current_weather.temperature;
      const wind = data.current_weather.windspeed;
      document.getElementById("weather").innerText = `{{ _('Auckland Weather') }}: ${temp}℃, {{ _('Wind') }} ${wind}km/h`;
    })
    .catch(error => {
      document.getElementById("weather").innerText = "{{ _('Failed to load weather') }}";
      console.error("Weather API error:", error);
    });
</script>

</body>
</html>